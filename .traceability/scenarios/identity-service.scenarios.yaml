scenarios:
  - id: IDENTITY-001
    manualTestId: MT-IDENTITY-001
    module: Authentication
    description: User login with valid credentials
    apiEndpoint: /identity/login
    httpMethod: POST
    category: Authentication
    priority: P0
    riskLevel: Critical
    matchingRules:
      - type: exact
        pattern: "login"
      - type: keyword
        keywords: ["login", "authenticate", "sign in"]
    estimatedEffort: Medium
    manualTestingRequired: false
    businessImpact: Users must be able to log in to access the system
    tags:
      - authentication
      - login
      - critical
    acceptanceCriteria:
      - User can log in with valid email and password
      - System returns JWT token upon successful login
      - Invalid credentials are rejected with appropriate error
      - Account locked after multiple failed attempts
    testData:
      validUser:
        email: "test@example.com"
        password: "Test123!"
      invalidUser:
        email: "invalid@example.com"
        password: "wrong"

  - id: IDENTITY-002
    manualTestId: MT-IDENTITY-002
    module: Authentication
    description: OTP verification for user authentication
    apiEndpoint: /identity/verify-otp
    httpMethod: POST
    category: Security
    priority: P1
    riskLevel: High
    matchingRules:
      - type: regex
        pattern: "verify.*otp|otp.*verif"
      - type: keyword
        keywords: ["VerifyOtp", "verify_otp", "verifyotp", "testVerifyOtp"]
    estimatedEffort: Medium
    manualTestingRequired: false
    businessImpact: Users must verify OTP for secure authentication
    tags:
      - authentication
      - security
      - otp
      - 2fa
    acceptanceCriteria:
      - Valid OTP code is accepted and user is authenticated
      - Invalid OTP code is rejected with error message
      - Expired OTP code is rejected
      - OTP can only be used once
      - Maximum 3 attempts allowed before OTP expires
    testData:
      validOtp:
        email: "test@example.com"
        otp: "123456"
      invalidOtp:
        email: "test@example.com"
        otp: "000000"
      expiredOtp:
        email: "test@example.com"
        otp: "999999"
