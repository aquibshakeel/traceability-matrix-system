# Identity Service - Business Scenarios
# This file defines all business scenarios for the identity microservice
# Format: YAML for readability and maintainability

service: identity-service
version: 1.0.0
lastUpdated: 2025-12-08

scenarios:
  # ═══════════════════════════════════════════════════════════
  # Module 2.1: Profile API
  # ═══════════════════════════════════════════════════════════
  
  - id: ID001
    manualTestId: TC-2.1.1
    module: "2.1"
    moduleName: "Profile API"
    description: "Get profile by ID"
    apiEndpoint: "GET /api/profile/:id"
    category: Positive
    priority: P2
    riskLevel: Low
    tags: [retrieval, profile]
    businessImpact: "Profile retrieval for user dashboard"
    
    matchingRules:
      - type: exact
        pattern: "should return profile found"
      - type: exact
        pattern: "should return 200 with profile"
      - type: fuzzy
        pattern: "get profile by id"
        threshold: 0.8
      - type: semantic
        keywords: [get, profile, find, retrieve, id, 200]
    
    expectedTests:
      minCount: 1
      testTypes: [unit]
    
    estimatedEffort: "N/A - Already covered"
    manualTestingRequired: false
  
  - id: ID002
    manualTestId: TC-2.1.2
    module: "2.1"
    moduleName: "Profile API"
    description: "Get profile by user ID"
    apiEndpoint: "GET /api/profile/user/:userId"
    category: Positive
    priority: P2
    riskLevel: Low
    tags: [retrieval, profile, user-mapping]
    businessImpact: "Link profiles to users across services"
    
    matchingRules:
      - type: exact
        pattern: "should return profile for user"
      - type: fuzzy
        pattern: "get profile by user id"
        threshold: 0.8
      - type: semantic
        keywords: [get, profile, user, userId, retrieve]
    
    estimatedEffort: "N/A - Already covered"
    manualTestingRequired: false
  
  - id: ID003
    manualTestId: TC-2.1.3
    module: "2.1"
    moduleName: "Profile API"
    description: "Profile not found (404)"
    apiEndpoint: "GET /api/profile/:id"
    category: Negative
    priority: P3
    riskLevel: Low
    tags: [error-handling, not-found]
    businessImpact: "Clear error messaging for missing profiles"
    
    matchingRules:
      - type: exact
        pattern: "should return 404 when profile not found"
      - type: fuzzy
        pattern: "profile not found"
        threshold: 0.8
      - type: semantic
        keywords: [not, found, 404, missing, profile]
    
    estimatedEffort: "N/A - Already covered"
    manualTestingRequired: false
